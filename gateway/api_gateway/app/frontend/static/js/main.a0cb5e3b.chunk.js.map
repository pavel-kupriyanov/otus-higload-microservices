{"version":3,"sources":["app/actions.js","app/utils.js","app/store.js","app/actionCreators.js","components/common/fields.js","components/common/validators.js","components/common/components/Hobbies.jsx","components/common/components/AnonymousOnly.jsx","components/common/components/AuthorizedOnly.jsx","components/common/components/Header.jsx","components/common/components/statuses/Friend.jsx","components/common/components/statuses/Unknown.jsx","components/common/components/statuses/WaitingYou.jsx","components/common/components/statuses/WaitingUser.jsx","components/common/components/UserStatus.jsx","components/common/components/statuses/You.jsx","components/common/components/UserInfo.jsx","components/common/components/UserCard.jsx","components/common/components/Loader.jsx","components/common/components/Notification.jsx","components/common/components/New.jsx","components/pages/login/Form.jsx","components/pages/login/LoginPage.jsx","components/pages/register/Form.jsx","components/pages/register/RegisterPage.jsx","components/pages/user/EditableHobbies.jsx","components/pages/user/FriendRequests.jsx","components/pages/user/AddNewForm.jsx","components/pages/user/UserPage.jsx","components/pages/users/Form.jsx","components/common/components/PaginateButtons.jsx","components/pages/users/UsersPage.jsx","components/pages/chat/Message.jsx","components/pages/chat/Form.jsx","components/pages/chat/ChatPage.jsx","app/ws.js","components/pages/feed/FeedPage.jsx","App.js","index.js"],"names":["SHOW_MESSAGE","HIDE_MESSAGE","SHOW_LOADER","HIDE_LOADER","LOGIN_SUCCESS","LOGIN_FAILED","GET_USER_DATA","REGISTER_SUCCESS","REGISTER_FAILED","LOGOUT","GET_USER_SUCCESS","ADD_HOBBY_SUCCESS","DELETE_HOBBY_SUCCESS","GET_USERS","CLEAR_USERS","CLEAR_USER","DELETE_FRIENDSHIP","ADD_FRIEND_REQUEST","DELETE_FRIEND_REQUEST","ACCEPT_FRIEND_REQUEST","DECLINE_FRIEND_REQUEST","GET_FRIEND_REQUEST_USERS","GET_MESSAGES","CLEAR_MESSAGES","GET_CHAT_USER","CLEAR_CHAT_USER","ADD_NEW","GET_NEWS","CLEAR_NEWS","TOKEN_FIELD_NAME","REQUEST_STATUSES","parsePayloadError","response","errors","data","detail","forEach","item","name","loc","length","msg","loadTokenFromStorage","token","localStorage","getItem","parsedToken","JSON","parse","expired_at","Date","getTime","arrayToQueryString","arr","encodedName","encodeURIComponent","map","join","toQueryString","obj","Object","keys","key","prepareMessages","oldMessages","newMessages","alreadyAddedIds","m","id","messages","Array","from","includes","push","sort","a","b","created","INITIAL_TOKEN","value","user_id","INITIAL_USER","first_name","last_name","age","gender","city","hobbies","initialState","userData","isAuthenticated","authentication","user","friends","friendRequests","friendRequestUsers","chat","users","requestCount","message","news","registerErrors","email","password","general","loginErrors","error","store","createStore","state","action","payload","type","filter","h","req","requestId","friend","requestsWithoutChanges","changedRequest","find","status","composeWithDevTools","applyMiddleware","thunk","HTTP_API_BASE","AXIOS_CONFIG","timeout","headers","axios","axiosBase","create","getAuthorizedAxios","getState","config","showMessage","dispatch","setTimeout","messageTimeout","showLoader","hideLoader","login","isSuccess","post","setItem","stringify","console","log","logout","removeItem","getUserData","userPromise","get","friendsPromise","friendRequestsPromise","Promise","all","register","getUser","userId","addHobby","createResponse","put","deleteHobby","delete","getFriends","clearUser","clearUsers","getUsers","page","paginate_by","query","deleteFriendship","addFriendRequest","deleteFriendRequest","acceptFriendRequest","friend_id","userResponse","declineFriendRequest","getFriendRequestUsers","ids","clearChatUser","clearMessages","getChatUser","getMessages","afterTimestamp","pageLimit","to_user_id","after_timestamp","sendMessage","text","getNews","order","getFeed","clearNews","addNew","SimpleField","input","onChange","restInput","meta","submitError","style","rest","s","TextField","helperText","touched","undefined","inputProps","margin","minWidth","variant","SimpleSelect","label","options","FormControl","InputLabel","Select","labelId","option","MenuItem","required","chipStyle","marginTop","marginRight","Hobbies","this","props","Math","random","toString","substring","hobby","Chip","React","Component","AnonymousOnly","redirect","Fragment","to","pathname","children","connect","AuthorizedOnly","authenticated","Header","toPath","bind","path","history","AppBar","position","Toolbar","Button","color","onClick","bindActionCreators","withRouter","Friend","handleDelete","onDelete","Unknown","handleAdd","WaitingYou","handleAccept","handleDecline","getFriendRequest","to_user","from_user","friendRequest","WaitingUser","statusComponents","YOU","FRIEND","WAITING_YOU_RESPONSE","WAITING_USER_RESPONSE","UNKNOWN","UserStatus","current","StatusComponent","getComponent","typographyStyle","display","justifyContent","UserInfo","Typography","component","padding","height","UserCard","Card","Loader","CircularProgress","Notification","Snackbar","open","anchorOrigin","vertical","horizontal","severity","hobbyStyle","ACTION_TYPES","New","renderNewText","renderName","renderAddedHobbyText","renderAddedFriendText","renderAddedPostText","newItem","author","new_friend","ListItemText","align","secondary","toDateString","LoginForm","handleSubmit","onSubmit","validate","size","minHeight","textAlign","LoginPage","form","RegisterForm","genderOptions","placeholder","validateForm","values","confirm","confirmPassword","RegisterPage","setState","EditableHobbies","restart","alreadyAdded","composeValidators","validators","reduce","validator","FriendRequests","showDeclined","declinedIds","Grid","container","spacing","justify","direction","xs","marginBottom","AddNewForm","submitting","pristine","event","reset","Paper","disabled","cardStyle","gridStyle","TABS","UserPage","showDeclinedFriendRequests","tab","isMyPage","Number","FormControlLabel","control","Checkbox","checked","square","Tabs","indicatorColor","textColor","e","aria-label","Tab","SearchForm","initialValue","PaginateButtons","isAll","handlePage","PAGE_LIMIT","UsersPage","lastQuery","prevProps","prevState","snapshot","pageNum","Container","myMessage","backgroundColor","Message","isMyMessage","currentUser","ListItem","primary","MessageForm","chatStyle","width","overflowY","ChatPage","scrollToBottom","handleOlder","chatUserId","interval","setInterval","lastMessage","prevMessages","clearInterval","animateScroll","containerId","duration","isNotEmpty","isReady","List","marginLeft","u","author_id","Divider","createFeedWebsocket","resolve","reject","ws","WebSocket","window","location","host","onmessage","onclose","onerror","onopen","send","FeedPage","then","close","App","render","match","params","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a0cb5e3b.chunk.js","sourcesContent":["export const SHOW_MESSAGE = 'SHOW_MESSAGE';\nexport const HIDE_MESSAGE = 'HIDE_MESSAGE';\n\nexport const SHOW_LOADER = 'SHOW_LOADER';\nexport const HIDE_LOADER = 'HIDE_LOADER';\n\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILED = 'LOGIN_FAILED';\n\nexport const GET_USER_DATA = 'GET_USER_DATA';\n\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAILED = 'REGISTER_FAILED';\n\nexport const LOGOUT = 'LOGOUT';\n\nexport const GET_USER_SUCCESS = 'GET_USER_SUCCESS';\n\nexport const ADD_HOBBY_SUCCESS = 'ADD_HOBBY';\nexport const DELETE_HOBBY_SUCCESS = 'DELETE_HOBBY';\n\n\nexport const GET_USERS = 'GET_USERS';\nexport const CLEAR_USERS = 'CLEAR_USERS';\nexport const CLEAR_USER = 'CLEAR_USER';\n\nexport const DELETE_FRIENDSHIP = 'DELETE_FRIENDSHIP';\nexport const ADD_FRIEND_REQUEST = 'ADD_FRIEND_REQUEST';\nexport const DELETE_FRIEND_REQUEST = 'DELETE_FRIEND_REQUEST';\nexport const ACCEPT_FRIEND_REQUEST = 'ACCEPT_FRIEND_REQUEST';\nexport const DECLINE_FRIEND_REQUEST = 'DECLINE_FRIEND_REQUEST';\n\nexport const GET_FRIEND_REQUEST_USERS = 'GET_FRIEND_REQUEST_USERS';\n\nexport const GET_MESSAGES = 'GET_MESSAGES';\nexport const CLEAR_MESSAGES = 'CLEAR_MESSAGES';\n\nexport const GET_CHAT_USER = 'GET_CHAT_USER';\nexport const CLEAR_CHAT_USER = 'CLEAR_CHAT_USER';\n\nexport const ADD_NEW = 'ADD_NEW';\nexport const GET_NEWS = 'GET_NEWS';\nexport const CLEAR_NEWS = 'CLEAR_NEWS';\n","const TOKEN_FIELD_NAME = 'ACCESS_TOKEN';\nexport const REQUEST_STATUSES = {\n  WAITING: 'WAITING',\n  DECLINED: 'DECLINED',\n}\n\n// TODO: ADD PAGINATE LATER\n\nexport const parsePayloadError = response => {\n  const errors = {};\n  response.data.detail.forEach(item => {\n    const name = item.loc[item.loc.length - 1];\n    errors[name] = item.msg;\n  });\n  return errors;\n}\n\n\nexport const storeTokenIntoStorage = token => {\n  localStorage.setItem(TOKEN_FIELD_NAME, JSON.stringify(token));\n}\n\nexport const loadTokenFromStorage = () => {\n  const token = localStorage.getItem(TOKEN_FIELD_NAME);\n  if (!token) {\n    return null;\n  }\n  const parsedToken = JSON.parse(token);\n  if (parsedToken.expired_at < new Date().getTime() / 1000) {\n    return null;\n  }\n  return parsedToken;\n};\n\nexport const deleteTokenFromStorage = () => {\n  localStorage.removeItem(TOKEN_FIELD_NAME);\n}\n\n\nexport const arrayToQueryString = (name, arr) => {\n  const encodedName = encodeURIComponent(name);\n  const str = arr.map(item => `${encodedName}=${encodeURIComponent(item)}`);\n  return str.join(\"&\");\n}\n\nexport const toQueryString = obj => {\n  const str = Object.keys(obj).map(key => {\n    return encodeURIComponent(key) + \"=\" + encodeURIComponent(obj[key])\n  })\n\n  return str.join(\"&\");\n}\n\n\nexport const prepareMessages = (oldMessages, newMessages) => {\n  const alreadyAddedIds = oldMessages.map(m => m.id);\n  const messages = Array.from(oldMessages);\n  newMessages.forEach(m => {\n    if (alreadyAddedIds.includes(m.id)) {\n      return\n    }\n    alreadyAddedIds.push(m.id);\n    messages.push(m);\n  })\n  return messages.sort((a, b) => {return a.created < b.created ? -1 : 1})\n}\n","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport {composeWithDevTools} from 'redux-devtools-extension';\n\nimport {loadTokenFromStorage, prepareMessages, REQUEST_STATUSES} from './utils';\n\nimport {\n  LOGIN_SUCCESS,\n  LOGIN_FAILED,\n  SHOW_LOADER,\n  HIDE_LOADER,\n  SHOW_MESSAGE,\n  HIDE_MESSAGE,\n  REGISTER_SUCCESS,\n  REGISTER_FAILED,\n  GET_USER_SUCCESS,\n  ADD_HOBBY_SUCCESS,\n  DELETE_HOBBY_SUCCESS,\n  LOGOUT,\n  GET_USERS,\n  CLEAR_USERS,\n  CLEAR_USER,\n  DELETE_FRIENDSHIP,\n  ADD_FRIEND_REQUEST,\n  DELETE_FRIEND_REQUEST,\n  ACCEPT_FRIEND_REQUEST,\n  DECLINE_FRIEND_REQUEST,\n  GET_USER_DATA,\n  GET_FRIEND_REQUEST_USERS,\n  GET_CHAT_USER,\n  CLEAR_CHAT_USER,\n  GET_MESSAGES,\n  CLEAR_MESSAGES,\n  GET_NEWS,\n  CLEAR_NEWS,\n  ADD_NEW\n} from './actions';\n\n\nconst INITIAL_TOKEN = {\n  id: 0,\n  value: '',\n  user_id: 0,\n  expired_at: '',\n}\n\nconst INITIAL_USER = {\n  id: 0,\n  first_name: '',\n  last_name: '',\n  age: 0,\n  gender: null,\n  city: '',\n  hobbies: []\n}\n\nconst initialState = {\n  userData: {\n    isAuthenticated: !!loadTokenFromStorage(),\n    authentication: loadTokenFromStorage() || INITIAL_TOKEN,\n    user: INITIAL_USER,\n    friends: [],\n    friendRequests: [],\n    friendRequestUsers: [],\n  },\n  chat: {\n    user: INITIAL_USER,\n    messages: []\n  },\n  user: INITIAL_USER,\n  users: [],\n  requestCount: 0,\n  message: '',\n  news: [],\n  registerErrors: {\n    email: null,\n    first_name: null,\n    last_name: null,\n    password: null,\n    city: null,\n    age: null,\n    gender: null,\n    general: null,\n  },\n  loginErrors: {\n    email: null,\n    password: null,\n  },\n  error: ''\n}\nexport const store = createStore(\n  reducer,\n  initialState,\n  composeWithDevTools(\n    applyMiddleware(thunk)\n  )\n);\n\nexport default function reducer(state = initialState, action) {\n  const payload = action.payload;\n\n  switch (action.type) {\n    case SHOW_MESSAGE: {\n      return {...state, message: payload}\n    }\n    case HIDE_MESSAGE: {\n      return {...state, message: ''}\n    }\n    case SHOW_LOADER: {\n      return {...state, requestCount: state.requestCount + 1}\n    }\n    case HIDE_LOADER: {\n      return {...state, requestCount: state.requestCount - 1}\n    }\n    case REGISTER_SUCCESS: {\n      return {...state, registerErrors: {}}\n    }\n    case REGISTER_FAILED: {\n      return {...state, registerErrors: payload}\n    }\n    case LOGIN_SUCCESS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          authentication: payload,\n          isAuthenticated: true,\n        },\n        loginErrors: {}\n      }\n    }\n    case LOGIN_FAILED: {\n      return {...state, loginErrors: payload}\n    }\n    case LOGOUT: {\n      return {\n        ...state,\n        userData: {\n          user: INITIAL_USER,\n          friends: [],\n          friendRequests: [],\n          friendRequestUsers: [],\n          authentication: INITIAL_TOKEN,\n          isAuthenticated: false,\n        },\n      }\n    }\n    case GET_USER_DATA: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          user: payload.user,\n          friends: payload.friends,\n          friendRequests: payload.friendRequests\n        },\n      }\n    }\n    case GET_USER_SUCCESS: {\n      return {...state, user: payload}\n    }\n    case CLEAR_USER: {\n      return {...state, user: INITIAL_USER}\n    }\n    case ADD_HOBBY_SUCCESS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          user: {\n            ...state.userData.user,\n            hobbies: [...state.userData.user.hobbies, payload]\n          }\n        }\n      }\n    }\n    case DELETE_HOBBY_SUCCESS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          user: {\n            ...state.userData.user,\n            hobbies: state.userData.user.hobbies.filter(h => h.id !== payload)\n          }\n        }\n      }\n    }\n    case GET_USERS: {\n      return {...state, users: payload}\n    }\n    case CLEAR_USERS: {\n      return {...state, users: []}\n    }\n\n    case DELETE_FRIENDSHIP: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friends: state.userData.friends.filter(user => user.id !== payload)\n        }\n      }\n    }\n\n    case ADD_FRIEND_REQUEST: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: [...state.userData.friendRequests, payload]\n        }\n      }\n    }\n\n    case DELETE_FRIEND_REQUEST: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: state.userData.friendRequests.filter(req => req.id !== payload)\n        }\n      }\n    }\n\n    case ACCEPT_FRIEND_REQUEST: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: state.userData.friendRequests.filter(req => req.id !== payload.requestId),\n          friends: [...state.userData.friends, payload.friend]\n        }\n      }\n    }\n\n    case DECLINE_FRIEND_REQUEST: {\n      const friendRequests = state.userData.friendRequests;\n      const requestsWithoutChanges = friendRequests.filter(req => req.id !== payload);\n      const changedRequest = friendRequests.find(req => req.id === payload);\n      changedRequest.status = REQUEST_STATUSES.DECLINED;\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: [...requestsWithoutChanges, changedRequest],\n        }\n      }\n    }\n    case GET_FRIEND_REQUEST_USERS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequestUsers: payload,\n        }\n      }\n    }\n\n    case GET_CHAT_USER: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          user: payload\n        }\n      }\n    }\n\n    case CLEAR_CHAT_USER: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          user: INITIAL_USER\n        }\n      }\n    }\n\n    case GET_MESSAGES: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          messages: prepareMessages(state.chat.messages, payload)\n        }\n      }\n    }\n\n    case CLEAR_MESSAGES: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          messages: []\n        }\n      }\n    }\n\n    case GET_NEWS: {\n      return {...state, news: payload}\n    }\n\n    case CLEAR_NEWS: {\n      return {...state, news: []}\n    }\n    \n    case ADD_NEW: {\n      return {...state, news: [payload, ...state.news]}\n    }\n\n    default:\n      return state\n  }\n}\n","import {default as axiosBase} from 'axios';\nimport {\n  LOGIN_SUCCESS,\n  LOGIN_FAILED,\n  SHOW_LOADER,\n  SHOW_MESSAGE,\n  HIDE_LOADER,\n  HIDE_MESSAGE,\n  REGISTER_FAILED,\n  REGISTER_SUCCESS,\n  GET_USER_SUCCESS,\n  ADD_HOBBY_SUCCESS,\n  DELETE_HOBBY_SUCCESS,\n  LOGOUT,\n  GET_USERS,\n  CLEAR_USER,\n  CLEAR_USERS,\n  DELETE_FRIENDSHIP,\n  ADD_FRIEND_REQUEST,\n  DELETE_FRIEND_REQUEST,\n  ACCEPT_FRIEND_REQUEST,\n  DECLINE_FRIEND_REQUEST,\n  GET_USER_DATA,\n  GET_FRIEND_REQUEST_USERS,\n  CLEAR_CHAT_USER,\n  CLEAR_MESSAGES,\n  GET_CHAT_USER,\n  GET_MESSAGES,\n  CLEAR_NEWS,\n  GET_NEWS,\n  ADD_NEW\n} from \"./actions\";\nimport {\n  deleteTokenFromStorage,\n  storeTokenIntoStorage,\n  parsePayloadError,\n  toQueryString,\n  arrayToQueryString\n} from \"./utils\";\nimport {store} from './store';\n\nexport const HTTP_API_BASE = `/api/v1`;\n\n\nconst AXIOS_CONFIG = {\n  timeout: 20000,\n  headers: {\n    \"X-Requested-With\": \"XMLHttpRequest\",\n    \"Content-Type\": \"application/json\",\n  },\n}\n\nconst axios = axiosBase.create(AXIOS_CONFIG);\n\nconst getAuthorizedAxios = () => {\n  const state = store.getState();\n  const authentication = state.userData.authentication;\n  const config = {\n    ...AXIOS_CONFIG,\n    headers: {\n      ...AXIOS_CONFIG.headers,\n      \"X-Auth-Token\": authentication && authentication.value\n    }\n  }\n  return axiosBase.create(config)\n}\n\nconst messageTimeout = 3;\n\n\nexport const showMessage = message => {\n  return dispatch => {\n    dispatch({type: SHOW_MESSAGE, payload: message});\n    setTimeout(() => dispatch({type: HIDE_MESSAGE}), messageTimeout * 1000);\n  }\n}\n\nexport const showLoader = () => {\n  return dispatch => {\n    dispatch({type: SHOW_LOADER});\n  }\n}\n\nexport const hideLoader = () => {\n  return dispatch => {\n    dispatch({type: HIDE_LOADER});\n  }\n}\n\nexport const login = (email, password) => {\n  return async dispatch => {\n    dispatch(showLoader());\n    let isSuccess = false;\n    try {\n      const response = await axios.post(`${HTTP_API_BASE}/auth/login`, {email, password});\n      isSuccess = true;\n      storeTokenIntoStorage(response.data);\n      dispatch({type: LOGIN_SUCCESS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      switch (e.response.status) {\n        case 422: {\n          dispatch({\n            type: LOGIN_FAILED,\n            payload: parsePayloadError(e.response)\n          });\n          break;\n        }\n        case 400: {\n          dispatch({\n            type: LOGIN_FAILED,\n            payload: {email: e.response.data.detail}\n          });\n          break;\n        }\n        default: {\n          dispatch({\n            type: LOGIN_FAILED,\n            payload: {general: \"Unexpected error\"}\n          });\n        }\n      }\n      dispatch(showMessage(\"Login failed\"));\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\nexport const logout = () => {\n  return dispatch => {\n    deleteTokenFromStorage();\n    dispatch({type: LOGOUT})\n  }\n}\n\nexport const getUserData = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    try {\n      const userPromise = axios.get(`${HTTP_API_BASE}/users/${id}/`);\n      const friendsPromise = axios.get(`${HTTP_API_BASE}/users/?friends_of=${id}`);\n      const friendRequestsPromise = axios.get(`${HTTP_API_BASE}/friendships/`);\n      const [user, friends, friendRequests] = await Promise.all(\n        [userPromise, friendsPromise, friendRequestsPromise]\n      );\n      dispatch({\n        type: GET_USER_DATA, payload: {\n          user: user.data,\n          friends: friends.data || [],\n          friendRequests: friendRequests.data || []\n        }\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage(\"Auth data failed. Please reload page.\"));\n    }\n  }\n}\n\n\nexport const register = (\n  {\n    email,\n    password,\n    first_name,\n    last_name,\n    age,\n    gender,\n    city\n  }\n) => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const payload = {email, password, first_name, last_name, age, gender, city};\n    let isSuccess = false;\n    try {\n      await axios.post(`${HTTP_API_BASE}/auth/register`, payload);\n      isSuccess = true;\n      dispatch(showMessage(\"Success!\"));\n      dispatch({type: REGISTER_SUCCESS});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage(\"Registration failed\"));\n      switch (e.response.status) {\n        case 422: {\n          dispatch({\n            type: REGISTER_FAILED,\n            payload: parsePayloadError(e.response)\n          });\n          break;\n        }\n        case 400: {\n          dispatch({\n            type: REGISTER_FAILED,\n            payload: {email: e.response.data.detail}\n          });\n          break;\n        }\n        default: {\n          dispatch({\n            type: REGISTER_FAILED,\n            payload: {general: \"Unexpected error\"}\n          });\n        }\n      }\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\n\nexport const getUser = userId => {\n  return async dispatch => {\n    let isSuccess = false;\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/users/${userId}/`);\n      isSuccess = true;\n      dispatch({type: GET_USER_SUCCESS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get user failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\n\nexport const addHobby = name => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const axios = getAuthorizedAxios();\n    try {\n      const createResponse = await axios.post(`${HTTP_API_BASE}/hobbies/`, {name});\n      await axios.put(`${HTTP_API_BASE}/users/hobbies/${createResponse.data.id}/`);\n      dispatch({type: ADD_HOBBY_SUCCESS, payload: createResponse.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Add hobby failed'))\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const deleteHobby = id => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const axios = getAuthorizedAxios();\n    try {\n      await axios.delete(`${HTTP_API_BASE}/users/hobbies/${id}/`);\n      dispatch({type: DELETE_HOBBY_SUCCESS, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Delete hobby failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const getFriends = id => {\n  return async dispatch => {\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/users/?friends_of=${id}`,);\n      dispatch({type: GET_USERS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get friends failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const clearUser = () => {\n  return dispatch => {\n    dispatch({type: CLEAR_USER});\n  }\n}\n\nexport const clearUsers = () => {\n  return dispatch => {\n    dispatch({type: CLEAR_USERS});\n  }\n}\n\nexport const getUsers = (first_name, last_name, page = 1, paginate_by = 100) => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const query = toQueryString({first_name, last_name, page, paginate_by});\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/users/?${query}`,);\n      dispatch({type: GET_USERS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get users failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const deleteFriendship = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      await axios.delete(`${HTTP_API_BASE}/friendships/friendship/${id}/`,);\n      dispatch({type: DELETE_FRIENDSHIP, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friendship deleting failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const addFriendRequest = userId => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.post(`${HTTP_API_BASE}/friendships/${userId}/`);\n      dispatch({type: ADD_FRIEND_REQUEST, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Add friend failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const deleteFriendRequest = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      await axios.delete(`${HTTP_API_BASE}/friendships/${id}/`);\n      dispatch({type: DELETE_FRIEND_REQUEST, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friend request deleting failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const acceptFriendRequest = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.put(`${HTTP_API_BASE}/friendships/accept/${id}/`);\n      const userResponse = await axios.get(`${HTTP_API_BASE}/users/${response.data.friend_id}/`);\n      dispatch({type: ACCEPT_FRIEND_REQUEST, payload: {requestId: id, friend: userResponse.data}});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friend request accepting failed.'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\n\nexport const declineFriendRequest = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      await axios.put(`${HTTP_API_BASE}/friendships/decline/${id}/`);\n      dispatch({type: DECLINE_FRIEND_REQUEST, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friend request declining failed.'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\n\nexport const getFriendRequestUsers = ids => {\n  return async dispatch => {\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/users/?${arrayToQueryString('ids', ids)}`);\n      dispatch({type: GET_FRIEND_REQUEST_USERS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n    }\n    dispatch(hideLoader());\n  }\n}\n\n\nexport const clearChatUser = () => {\n  return dispatch => dispatch({type: CLEAR_CHAT_USER});\n}\n\nexport const clearMessages = () => {\n  return dispatch => dispatch({type: CLEAR_MESSAGES});\n}\n\n\nexport const getChatUser = userId => {\n  return async dispatch => {\n    let isSuccess = false;\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/users/${userId}/`);\n      isSuccess = true;\n      dispatch({type: GET_CHAT_USER, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get user failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\nexport const getMessages = (userId, afterTimestamp = 0, page = 1, pageLimit = 100) => {\n  return async dispatch => {\n    let data = [];\n    const payload = {\n      to_user_id: userId,\n      after_timestamp: afterTimestamp,\n      page: page,\n      paginate_by: pageLimit\n    }\n    const query = toQueryString(payload);\n    const axios = getAuthorizedAxios();\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/messages/?${query}`);\n      data = response.data;\n      dispatch({type: GET_MESSAGES, payload: data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get messages failed'))\n    }\n    return data.length > 0;\n  }\n}\n\nexport const sendMessage = (userId, text) => {\n  return async dispatch => {\n    let isSuccess = false;\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.post(`${HTTP_API_BASE}/messages/`, {to_user_id: userId, text});\n      isSuccess = true;\n      dispatch({type: GET_MESSAGES, payload: [response.data]});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Send message failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\n\nexport const getNews = (userId, page = 1, paginate_by = 100, order='DESC') => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const query = toQueryString({page, paginate_by, order});\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/news/${userId}/?${query}`,);\n      dispatch({type: GET_NEWS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get news failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const getFeed = (page = 1, paginate_by = 100, order='DESC') => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const query = toQueryString({page, paginate_by, order});\n    const axios = getAuthorizedAxios();\n    try {\n      const response = await axios.get(`${HTTP_API_BASE}/news/feed/?${query}`,);\n      dispatch({type: GET_NEWS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get feed failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const clearNews = () => {\n  return dispatch => dispatch({type: CLEAR_NEWS});\n}\n\nexport const addNew = (text) => {\n    return async dispatch => {\n    let isSuccess = false;\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.post(`${HTTP_API_BASE}/news/`, {text});\n      isSuccess = true;\n      dispatch({type: ADD_NEW, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Send message failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n","import {TextField, FormControl, InputLabel, Select, MenuItem} from \"@material-ui/core\";\n\n\nexport function SimpleField(\n  {\n    input: {name, onChange, value, ...restInput},\n    meta, submitError, style, ...rest\n  }) {\n  const s = style ? style : {};\n  return <TextField\n    {...rest}\n    name={name}\n    helperText={meta.touched ? meta.error || submitError : undefined}\n    error={(meta.error || submitError) && meta.touched}\n    inputProps={restInput}\n    onChange={onChange}\n    value={value}\n    style={{margin: 10, minWidth: '60%', ...s}}\n    id=\"outlined-basic\"\n    variant=\"outlined\"\n  />\n}\n\n\nexport function SimpleSelect(\n  {\n    input: {name, onChange, value, ...restInput},\n    meta, submitError, label, options, ...rest\n  }) {\n  return <FormControl variant=\"outlined\" style={{margin: 10, minWidth: '60%'}}>\n    <InputLabel id=\"demo-simple-select-outlined-label\">{label}</InputLabel>\n    <Select\n      {...rest}\n      name={name}\n      helperText={meta.touched ? meta.error || submitError : undefined}\n      error={(meta.error || submitError) && meta.touched}\n      inputProps={restInput}\n      labelId=\"demo-simple-select-outlined-label\"\n      id=\"demo-simple-select-outlined\"\n      value={value}\n      onChange={onChange}\n      label={label}\n    >\n      {Object.keys(options).map(option =>\n        <MenuItem key={\"select\" + option} value={option}>\n          {options[option]}\n        </MenuItem>)}\n    </Select>\n  </FormControl>\n\n}\n","export const required = value => (value ? undefined : 'Required');\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {Chip} from \"@material-ui/core\";\n\nconst chipStyle = {\n  marginTop: '3px',\n  marginRight: '5px',\n}\n\nexport default class Hobbies extends React.Component {\n\n  render() {\n    const {hobbies} = this.props;\n    const key = Math.random().toString(36).substring(7);\n    return (\n      <>\n        {hobbies.map(hobby =>\n          <Chip key={key + hobby.id} label={hobby.name} style={chipStyle}/>\n        )}\n      </>\n    );\n  }\n}\n\nHobbies.propTypes = {\n  hobbies: PropTypes.array.isRequired,\n}\n\n\n\n","import React from 'react';\nimport {Redirect} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\n\nclass AnonymousOnly extends React.Component {\n\n\n  render() {\n    const {userData} = this.props;\n    const redirect = userData && userData.isAuthenticated;\n    return (\n      <React.Fragment>\n        {redirect ? <Redirect to={{pathname: `/${userData.authentication.user_id}`}}/> :\n          this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n\n\nAnonymousOnly.propTypes = {\n  userData: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\n\nexport default connect(mapStateToProps, null)(AnonymousOnly);\n","import React from 'react';\nimport {Redirect} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\n\nclass AuthorizedOnly extends React.Component {\n\n\n  render() {\n    const {userData} = this.props;\n    const authenticated = userData && userData.isAuthenticated;\n    return (\n      <React.Fragment>\n        {!authenticated ? <Redirect to={{pathname: '/login'}}/> :\n          this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n\n\nAuthorizedOnly.propTypes = {\n  userData: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\n\nexport default connect(mapStateToProps, null)(AuthorizedOnly);\n","import React from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport {AppBar, Toolbar, Button} from \"@material-ui/core\";\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {logout} from \"../../../app/actionCreators\";\nimport {Loader} from \"../index\";\n\n\nclass Header extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.toPath = this.toPath.bind(this);\n  }\n\n\n  toPath(path) {\n    this.props.history.push(path);\n  }\n\n\n  render() {\n    const {isAuthenticated, logout, user} = this.props;\n\n\n    return (\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/')}>\n            Social Network\n          </Button>\n          {isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/login')}>\n            {user.first_name} {user.last_name}\n          </Button>}\n          {isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/feed')}>\n            News\n          </Button>}\n          {isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={logout}>\n            Logout\n          </Button>}\n          {!isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/login')}>\n            Login\n          </Button>}\n          {!isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/register')}>\n            Register\n          </Button>}\n          <Loader/>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.userData.isAuthenticated,\n  user: state.userData.user\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    logout,\n  }, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Header));\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {deleteFriendship} from \"../../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass Friend extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  handleDelete() {\n    const {user, deleteFriendship} = this.props;\n    deleteFriendship(user.id);\n  }\n\n  render() {\n    return <Chip label=\"Friend\" onDelete={this.handleDelete} color=\"primary\"/>\n  }\n}\n\nFriend.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    deleteFriendship,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(Friend);\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {addFriendRequest} from \"../../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass Unknown extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleAdd = this.handleAdd.bind(this);\n  }\n\n  handleAdd() {\n    const {user, addFriendRequest} = this.props;\n    addFriendRequest(user.id);\n  }\n\n  render() {\n    return <Chip label=\"Add Friend\" onClick={this.handleAdd}/>\n  }\n}\n\nUnknown.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    addFriendRequest,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(Unknown);\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {acceptFriendRequest, declineFriendRequest} from \"../../../../app/actionCreators\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass WaitingYou extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleAccept = this.handleAccept.bind(this);\n    this.handleDecline = this.handleDecline.bind(this);\n    this.getFriendRequest = this.getFriendRequest.bind(this);\n  }\n\n  getFriendRequest() {\n    const {userData, user} = this.props;\n    return userData.friendRequests.find(req => {\n      return req.to_user === userData.user.id && req.from_user === user.id;\n    })\n  }\n\n  handleAccept(friendRequest) {\n    this.props.acceptFriendRequest(friendRequest.id);\n  }\n\n  handleDecline(friendRequest) {\n    this.props.declineFriendRequest(friendRequest.id);\n  }\n\n  render() {\n    const friendRequest = this.getFriendRequest();\n\n    return <Chip\n      label='Accept'\n      onDelete={() => this.handleDecline(friendRequest)}\n      onClick={() => this.handleAccept(friendRequest)}\n      color='secondary'\n    />\n  }\n}\n\nWaitingYou.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData\n});\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    acceptFriendRequest, declineFriendRequest\n  }, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaitingYou);\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {deleteFriendRequest} from \"../../../../app/actionCreators\";\nimport {REQUEST_STATUSES} from \"../../../../app/utils\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass WaitingUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.getFriendRequest = this.getFriendRequest.bind(this);\n  }\n\n  getFriendRequest() {\n    const {userData, user} = this.props;\n    return userData.friendRequests.find(req => {\n      return req.from_user === userData.user.id && req.to_user === user.id;\n    })\n  }\n\n\n  handleDelete(friendRequest) {\n    this.props.deleteFriendRequest(friendRequest.id);\n  }\n\n  render() {\n    const friendRequest = this.getFriendRequest();\n    const isWaiting = friendRequest.status === REQUEST_STATUSES.WAITING;\n    const text = isWaiting ? 'Waiting user response' : 'User decline your request';\n    return <Chip\n      label={text}\n      onDelete={() => this.handleDelete(friendRequest)}\n      color='secondary'\n    />\n  }\n}\n\nWaitingUser.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData\n});\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    deleteFriendRequest\n  }, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaitingUser);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\nimport {You, Friend, WaitingYou, WaitingUser, Unknown} from './statuses'\n\n\nconst statusComponents = {\n  YOU: You,\n  FRIEND: Friend,\n  WAITING_YOU_RESPONSE: WaitingYou,\n  WAITING_USER_RESPONSE: WaitingUser,\n  UNKNOWN: Unknown,\n}\n\n\nclass UserStatus extends React.Component {\n\n  getComponent() {\n    const {user, userData} = this.props;\n    const current = userData.user;\n\n    if (!userData.isAuthenticated) {\n      return statusComponents.UNKNOWN;\n    }\n\n    if (user.id === userData.authentication.user_id) {\n      return statusComponents.YOU;\n    }\n    if (userData.friends.find(friend => friend.id === user.id)) {\n      return statusComponents.FRIEND;\n    }\n    const friendRequestFrom = userData.friendRequests.find(req => {\n      return req.from_user === current.id && req.to_user === user.id;\n    })\n    if (friendRequestFrom) {\n      return statusComponents.WAITING_USER_RESPONSE\n    }\n    const friendRequestTo = userData.friendRequests.find(req => {\n      return req.to_user === current.id && req.from_user === user.id;\n    })\n    if (friendRequestTo) {\n      return statusComponents.WAITING_YOU_RESPONSE;\n    }\n    return statusComponents.UNKNOWN;\n  }\n\n  render() {\n    const StatusComponent = this.getComponent();\n    return <StatusComponent user={this.props.user}/>;\n  }\n}\n\nUserStatus.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\n\nexport default connect(mapStateToProps, null)(UserStatus);\n\n\n\n","import React from \"react\";\nimport {Chip} from \"@material-ui/core\";\n\nexport default class You extends React.Component{\n  render() {\n    return <Chip label=\"You\" color=\"primary\"/>\n  }\n}\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {Link} from \"react-router-dom\";\nimport UserStatus from \"./UserStatus\";\nimport {Typography, Button} from \"@material-ui/core\";\nimport {connect} from \"react-redux\";\n\n\nconst typographyStyle = {\n  display: 'flex',\n  justifyContent: 'space-between'\n}\n\n\nclass UserInfo extends React.Component {\n\n\n  render() {\n    const {user, isAuthenticated} = this.props;\n\n    return <>\n      <Typography variant=\"h6\" component=\"h2\" style={typographyStyle}>\n        <Link to={`/${user.id}`}>{user.first_name} {user.last_name}</Link>\n        {isAuthenticated && <UserStatus user={user}/>}\n      </Typography>\n      {isAuthenticated && <Link to={`/chat/${user.id}`}>\n        <Button variant=\"contained\" color=\"primary\">Chat</Button>\n      </Link>}\n\n      <p><b>Age:</b> {user.age}</p>\n      {user.city && <p><b>City:</b> {user.city}</p>}\n      {user.gender && <p><b>Gender:</b> {user.gender}</p>}\n    </>\n  }\n}\n\nUserInfo.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.userData.isAuthenticated,\n});\n\n\nexport default connect(mapStateToProps, null)(UserInfo);\n\n\n\n\n\n\n\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport Hobbies from \"./Hobbies\";\nimport {Card} from \"@material-ui/core\";\nimport UserInfo from \"./UserInfo\";\n\nconst style = {\n  padding: '10px',\n  height: '90%'\n}\n\n\nexport default class UserCard extends React.Component {\n\n\n  render() {\n    const {user} = this.props;\n\n    return (\n      <Card style={style}>\n        <UserInfo user={user}/>\n        <Hobbies hobbies={user.hobbies}/>\n      </Card>\n    );\n  }\n}\n\nUserCard.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\n\n\n\n\n\n\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {CircularProgress} from \"@material-ui/core\";\n\n\n\nclass Loader extends React.Component {\n\n\n  render() {\n\n    return (\n      <>\n        {!!this.props.requestCount && <CircularProgress color=\"inherit\"/>}\n      </>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  requestCount: state.requestCount,\n});\n\n\nexport default connect(mapStateToProps, null)(Loader);\n","import React from 'react';\nimport {connect} from \"react-redux\";\n\nimport {Snackbar} from \"@material-ui/core\";\n\n\nclass Notification extends React.Component {\n\n\n  render() {\n    const {message} = this.props;\n\n    return <Snackbar\n      open={!!message}\n      anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n      message={message}\n      severity=\"error\"\n    />\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  message: state.message,\n});\n\n\nexport default connect(mapStateToProps, null)(Notification);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {Card, Chip} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nconst style = {padding: 20, marginTop: 5};\nconst hobbyStyle = { marginRight: 5};\n\n\nconst ACTION_TYPES = {\n  ADDED_FRIEND: 'ADDED_FRIEND',\n  ADDED_HOBBY: 'ADDED_HOBBY',\n  ADDED_POST: 'ADDED_POST'\n}\n\n\nexport default class New extends React.Component {\n\n\n  constructor(props) {\n    super(props);\n    this.renderNewText = this.renderNewText.bind(this);\n    this.renderName = this.renderName.bind(this);\n    this.renderAddedHobbyText = this.renderAddedHobbyText.bind(this);\n    this.renderAddedFriendText = this.renderAddedFriendText.bind(this);\n    this.renderAddedPostText = this.renderAddedPostText.bind(this);\n  }\n\n  renderNewText(newItem) {\n    const {payload, type} = newItem;\n\n    switch (type) {\n      case ACTION_TYPES.ADDED_FRIEND:\n        return this.renderAddedFriendText(payload);\n      case ACTION_TYPES.ADDED_HOBBY:\n        return this.renderAddedHobbyText(payload);\n      case ACTION_TYPES.ADDED_POST:\n        return this.renderAddedPostText(payload);\n      default:\n        return <p>{payload}</p>\n    }\n  }\n\n  renderName(user) {\n    const {id, first_name, last_name} = user;\n    return <Link to={`/${id}`}>{first_name} {last_name ? last_name : ''}</Link>\n  }\n\n  renderAddedHobbyText(payload) {\n    const {author, hobby} = payload;\n    return <div>\n      {this.renderName(author)} added a new hobby: <Chip label={hobby.name} style={hobbyStyle}/>\n    </div>\n  }\n\n  renderAddedFriendText(payload) {\n    const {author, new_friend} = payload;\n    return <div>\n      {this.renderName(author)} added a new friend {this.renderName(new_friend)}\n    </div>\n  }\n\n  renderAddedPostText(payload) {\n    const {author, text} = payload;\n    return <div>\n      {this.renderName(author)} written: {text}\n    </div>\n  }\n\n  render() {\n    const {newItem} = this.props;\n    return (\n      <Card style={style}>\n        {this.renderNewText(newItem)}\n        <ListItemText\n          align=\"right\"\n          secondary={(new Date(newItem.created * 1000)).toDateString()}\n        />\n      </Card>\n    );\n  }\n}\n\nNew.propTypes = {\n  newItem: PropTypes.object.isRequired,\n}\n\n\n\n\n\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {connect} from \"react-redux\";\n\nimport {SimpleField, required} from \"../../common\";\nimport {Button} from \"@material-ui/core\";\n\n\nclass LoginForm extends React.Component {\n\n  render() {\n    const {handleSubmit, errors} = this.props;\n\n    return (\n      <form onSubmit={handleSubmit}>\n        <Field name=\"email\" validate={required} type=\"email\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Email\"}\n              submitError={errors.email}\n            />\n          }}\n        </Field>\n        <Field name=\"password\" type=\"password\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Password\"}\n              submitError={errors.password}\n            />\n          }}\n        </Field>\n        {errors.general && <div>{errors.general}</div>}\n        <div>\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\">\n            Submit\n          </Button>\n        </div>\n      </form>\n    )\n  }\n}\n\nLoginForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  errors: PropTypes.object,\n}\n\n\nconst mapStateToProps = state => ({\n  errors: state.loginErrors,\n});\n\nexport default connect(mapStateToProps, null)(LoginForm);\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {Form} from \"react-final-form\";\n\nimport {login} from \"../../../app/actionCreators\";\nimport LoginForm from \"./Form\";\nimport {Card, Typography} from \"@material-ui/core\";\n\n\nconst style = {\n  minWidth: '50%',\n  minHeight: '200px',\n  padding: '20px',\n  margin: '40px',\n  textAlign: 'center',\n  justifyContent: 'center'\n}\n\nclass LoginPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  async handleSubmit(form) {\n    await this.props.login(form.email, form.password);\n  }\n\n  render() {\n    return (\n      <Card style={style}>\n         <Typography variant=\"h4\" component=\"h2\">\n          Login\n        </Typography>\n        <Form\n          component={LoginForm}\n          onSubmit={this.handleSubmit}\n        />\n      </Card>\n    );\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    login,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(LoginPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\n\nimport {SimpleField, SimpleSelect, required} from \"../../common\";\nimport {connect} from \"react-redux\";\nimport {Button} from \"@material-ui/core\";\n\n\nclass RegisterForm extends React.Component {\n\n  render() {\n    const {handleSubmit, errors} = this.props;\n    const genderOptions = {\"MALE\": \"Male\", \"FEMALE\": \"Female\", \"OTHER\": \"Other\"}\n    return (\n      <form onSubmit={handleSubmit}>\n        <Field name=\"email\" validate={required} type=\"email\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Email\"}\n              placeholder={\"Email\"}\n              submitError={errors.email}\n            />\n          }}\n        </Field>\n        <Field name=\"password\" type=\"password\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Password\"}\n              placeholder={\"Password\"}\n              submitError={errors.password}\n            />\n          }}\n        </Field>\n        <Field name=\"confirm\" type=\"password\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Confirm password\"}\n              placeholder={\"Confirm\"}\n              submitError={null}\n            />\n          }}\n        </Field>\n        <Field name=\"first_name\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"First Name\"}\n              placeholder={\"First Name\"}\n              submitError={errors.first_name}\n            />\n          }}\n        </Field>\n        <Field name=\"last_name\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Last Name\"}\n              placeholder={\"Last Name\"}\n              submitError={errors.last_name}\n            />\n          }}\n        </Field>\n        <Field name=\"city\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"City\"}\n              placeholder={\"City\"}\n              submitError={errors.city}\n            />\n          }}\n        </Field>\n        <Field name=\"gender\">\n          {({input, meta}) => {\n            return <SimpleSelect\n              input={input}\n              meta={meta}\n              label=\"Gender\"\n              submitError={errors.gender}\n              options={genderOptions}\n            />\n          }}\n        </Field>\n        <Field name=\"age\" type=\"number\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Age\"}\n              placeholder={\"Age\"}\n              submitError={errors.age}\n            />\n          }}\n        </Field>\n        {errors.general && <div>{errors.general}</div>}\n        <div>\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\">\n            Submit\n          </Button>\n        </div>\n      </form>\n    )\n  }\n}\n\n\nRegisterForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  errors: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  errors: state.registerErrors,\n});\n\nexport default connect(mapStateToProps, null)(RegisterForm);\n\n\n\n\n\n\n\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {Redirect} from \"react-router-dom\";\nimport {Form} from \"react-final-form\";\nimport PropTypes from \"prop-types\";\nimport {Card, Typography} from \"@material-ui/core\";\n\n\nimport {register} from \"../../../app/actionCreators\";\nimport RegisterForm from \"./Form\";\n\n\nconst style = {\n  minWidth: '50%',\n  minHeight: '200px',\n  padding: '20px',\n  margin: '40px',\n  textAlign: 'center',\n  justifyContent: 'center'\n}\n\n\nconst validateForm = values => {\n  if (values.password !== values.confirm) {\n    return {\n      confirmPassword: \"Passwords mismatch\"\n    }\n  }\n}\n\n\nclass RegisterPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {redirect: false};\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  async handleSubmit(form) {\n    const isSuccess = await this.props.register(form);\n    if (isSuccess) {\n      this.setState({redirect: true});\n    }\n  }\n\n  render() {\n\n    return (\n      <>\n        {this.state.redirect ?\n          <Redirect to={{pathname: \"/login\"}}/> :\n          <Card style={style}>\n            <Typography variant=\"h4\" component=\"h2\">\n              Register\n            </Typography>\n            <Form\n              component={RegisterForm}\n              onSubmit={this.handleSubmit}\n              validate={validateForm}\n            />\n          </Card>\n        }\n      </>);\n  }\n}\n\nRegisterPage.propTypes = {\n  register: PropTypes.func\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    register,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(RegisterPage);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {Field, Form} from \"react-final-form\";\nimport {required, SimpleField} from \"../../common\";\nimport {bindActionCreators} from \"redux\";\nimport {addHobby, deleteHobby} from \"../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport {Button, Chip} from \"@material-ui/core\";\n\nconst chipStyle = {\n  marginTop: '5px',\n  marginRight: '5px',\n}\n\nclass EditableHobbies extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.addHobby = this.addHobby.bind(this);\n  }\n\n  addHobby(values, form) {\n    this.props.addHobby(values.hobby);\n    setTimeout(() => form.restart(), 0);\n  }\n\n  deleteHobby(id) {\n    this.props.deleteHobby(id);\n  }\n\n  render() {\n    const {hobbies} = this.props;\n    const alreadyAdded = value => hobbies.find(hobby => hobby.name === value) ? 'Already added' : null;\n    const composeValidators = (...validators) => value =>\n      validators.reduce((error, validator) => error || validator(value), undefined)\n\n\n    return (\n      <div>\n        {hobbies.map(hobby => {\n          return <Chip\n            key={'hobby_' + hobby.id}\n            label={hobby.name}\n            onDelete={() => this.deleteHobby(hobby.id)}\n            style={chipStyle}/>\n        })}\n        <Form onSubmit={this.addHobby}>\n          {props => (\n            <form onSubmit={props.handleSubmit} style={{marginTop: '10px'}}>\n              <Field name=\"hobby\" validate={composeValidators(alreadyAdded, required)} type=\"text\">\n                {({input, meta}) => {\n                  return <SimpleField\n                    input={input}\n                    meta={meta}\n                    label={\"Hobby\"}\n                  />\n                }}\n              </Field>\n              <Button\n                style={{marginTop: '15px'}}\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"submit\"\n                size=\"large\">\n                Submit\n              </Button>\n            </form>\n          )}\n        </Form>\n      </div>\n    );\n  }\n}\n\nEditableHobbies.propTypes = {\n  hobbies: PropTypes.array.isRequired,\n  addHobby: PropTypes.func,\n  deleteHobby: PropTypes.func\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({addHobby, deleteHobby}, dispatch)\n}\n\n\nexport default connect(null, mapDispatchToProps)(EditableHobbies);\n\n\n\n\n\n\n","import React from 'react';\n\nimport {bindActionCreators} from \"redux\";\nimport {getFriendRequestUsers} from \"../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport {REQUEST_STATUSES} from \"../../../app/utils\";\nimport UserCard from \"../../common/components/UserCard\";\nimport PropTypes from \"prop-types\";\nimport {Grid} from \"@material-ui/core\";\n\n\nclass FriendRequests extends React.Component {\n\n\n  componentDidMount() {\n    const {userData} = this.props;\n    const friendRequests = userData.friendRequests;\n    const ids = friendRequests.map(req =>\n      req.from_user === userData.user.id ? req.to_user : req.from_user\n    )\n    this.props.getFriendRequestUsers(ids);\n  }\n\n  render() {\n    const {friendRequestUsers, friendRequests, user} = this.props.userData;\n    let users = friendRequestUsers;\n    if (!this.props.showDeclined) {\n      const declinedIds = friendRequests\n        .filter(req => req.status !== REQUEST_STATUSES.DECLINED)\n        .map(req => req.from_user === user.id ? req.to_user : req.from_user)\n      users = users.filter(user => declinedIds.find(id => id === user.id))\n    }\n\n    return <Grid item container spacing={2} justify=\"space-between\" direction=\"row\">\n      {users.map(user => <Grid item xs={6} key={'friend_request_user_' + user.id}>\n          <UserCard user={user}/>\n        </Grid>\n      )}\n    </Grid>\n  }\n}\n\nFriendRequests.propTypes = {\n  showDeclined: PropTypes.bool.isRequired\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({getFriendRequestUsers}, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FriendRequests);\n\n\n\n\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {Button, Grid} from \"@material-ui/core\";\n\nimport {SimpleField} from \"../../common\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst style = {\n  minWidth: '100%',\n  marginTop: 10,\n  marginBottom: 10,\n}\n\n\nexport default class AddNewForm extends React.Component {\n\n  render() {\n    const {handleSubmit, form, submitting, pristine} = this.props;\n\n    return (\n      <form onSubmit={async event => {await handleSubmit(event);form.reset()}} style={style}>\n        <Grid container component={Paper}>\n          <Grid item xs={10}>\n            <Field name=\"text\">\n              {({input, meta}) => {\n                return <SimpleField input={input} meta={meta} style={{minWidth: '90%'}} label=\"Message\"/>\n              }}\n            </Field>\n          </Grid>\n          <Grid item xs={2} style={{marginTop: 'auto', marginBottom: 'auto'}}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              type=\"submit\"\n              size=\"large\"\n              disabled={submitting || pristine}>\n              Post\n            </Button>\n          </Grid>\n        </Grid>\n      </form>\n    )\n  }\n}\n\nAddNewForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n}\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {bindActionCreators} from 'redux';\nimport {Form} from \"react-final-form\";\nimport {Card, Grid, Typography, FormControlLabel, Checkbox, Paper, Tabs, Tab} from '@material-ui/core';\n\nimport {getUser, getFriends, clearUser, clearUsers, getNews, clearNews, addNew} from '../../../app/actionCreators';\nimport {Hobbies, UserInfo, UserCard} from '../../common';\nimport EditableHobbies from './EditableHobbies';\nimport FriendRequests from './FriendRequests';\nimport New from \"../../common/components/New\";\nimport AddNewForm from \"./AddNewForm\";\n\nconst PAGE_LIMIT = 10;\n\nconst cardStyle = {\n  padding: '20px',\n  height: '100%',\n  marginTop: '10px'\n}\n\nconst gridStyle = {\n  marginTop: '40px',\n  padding: '20px'\n}\n\nconst TABS = {\n  FRIENDS: 'FRIENDS',\n  POSTS: 'POSTS'\n}\n\nclass UserPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {showDeclinedFriendRequests: true, tab: TABS.POSTS};\n    this.addNew = this.addNew.bind(this);\n  }\n\n  componentDidMount() {\n    const {id, getUser, getFriends, getNews} = this.props;\n    getUser(id);\n    getFriends(id);\n    getNews(id, 1, PAGE_LIMIT);\n  }\n\n  componentWillUnmount() {\n    const {clearUser, clearUsers, clearNews} = this.props;\n    clearUser();\n    clearUsers();\n    clearNews();\n  }\n\n  addNew(form){\n    this.props.addNew(form.text);\n  }\n\n\n  render() {\n    const {id, user, users, userData, news} = this.props;\n    const {showDeclinedFriendRequests, tab} = this.state;\n    const isMyPage = Number(id) === userData.user.id;\n    const friends = isMyPage ? userData.friends : users;\n\n    return <Grid item container spacing={2} justify='space-between' direction='row'>\n      <Grid item xs={6}>\n        <Card style={cardStyle}>\n          <Typography variant='h5' component='h2'>\n            Common info\n          </Typography>\n          {user && user.id && <UserInfo user={user}/>}\n        </Card>\n      </Grid>\n      <Grid item xs={6}>\n        <Card style={cardStyle}>\n          <Typography variant='h5' component='h2'>\n            Hobbies\n          </Typography>\n          {isMyPage ? <EditableHobbies hobbies={userData.user.hobbies}/> :\n            <Hobbies hobbies={user ? user.hobbies : []}/>}\n        </Card>\n      </Grid>\n      {(isMyPage && !!userData.friendRequests.length) && <>\n        <Grid item xs={12} style={gridStyle}>\n          <Typography variant='h5' component='h2' style={\n            {justifyContent: 'space-between', display: 'flex'}}\n          >\n            Friend requests\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={showDeclinedFriendRequests}\n                  onChange={() => this.setState({\n                    showDeclinedFriendRequests: !showDeclinedFriendRequests\n                  })}\n                  name='showDeclined'\n                  color='primary'\n                />\n              }\n              label='Show declined requests'\n            />\n          </Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <FriendRequests showDeclined={showDeclinedFriendRequests}/>\n        </Grid>\n      </>}\n      <Grid item xs={12} style={{marginTop: 70}}>\n        <Paper square>\n          <Tabs\n            value={tab}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            onChange={(e, value) => this.setState({...this.state, tab: value})}\n            aria-label=\"disabled tabs example\"\n          >\n            <Tab label=\"Friends\" value={TABS.FRIENDS}/>\n            <Tab label=\"Latest posts\" value={TABS.POSTS}/>\n          </Tabs>\n        </Paper>\n      </Grid>\n      <Grid item xs={12} container spacing={2} justify='space-between' direction='row'>\n        {tab === TABS.FRIENDS && friends.map(user => <Grid item xs={6} key={'friend_' + user.id}>\n            <UserCard user={user}/>\n          </Grid>\n        )}\n        {tab === TABS.POSTS && isMyPage && <Grid item xs={12}>\n          <Form onSubmit={this.addNew} component={AddNewForm}/>\n        </Grid>}\n        {tab === TABS.POSTS && news.map(newItem => <Grid item xs={12} key={'new_' + newItem.id}>\n            <New newItem={newItem}/>\n          </Grid>\n        )}\n      </Grid>\n    </Grid>\n  }\n}\n\nUserPage.propTypes = {\n  id: PropTypes.string.isRequired,\n  user: PropTypes.object,\n  accessToken: PropTypes.object,\n  getUser: PropTypes.func.isRequired,\n  getFriends: PropTypes.func.isRequired,\n  clearUser: PropTypes.func.isRequired,\n  clearUsers: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  userData: state.userData,\n  users: state.users,\n  news: state.news\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getUser, getFriends, clearUser, clearUsers, getNews, clearNews, addNew\n  }, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {Button, Card, Grid} from \"@material-ui/core\";\n\nimport {SimpleField} from \"../../common\";\n\nconst style = {\n  minWidth: '100%',\n  marginTop: '10px',\n  marginBottom: '10px',\n  textAlign: 'center',\n  justifyContent: 'center'\n}\n\n\nexport default class SearchForm extends React.Component {\n\n  render() {\n    const {handleSubmit} = this.props;\n\n    return (\n      <Card style={style}>\n        <form onSubmit={handleSubmit}>\n          <Grid container justify=\"center\" spacing={1}>\n            <Grid item>\n              <Field name=\"first_name\" type=\"text\" parse={value => value || ''} initialValue={''}>\n                {({input, meta}) => {\n                  return <SimpleField\n                    input={input}\n                    meta={meta}\n                    label={\"First Name\"}\n                    placeholder={\"First Name\"}\n                  />\n                }}\n              </Field>\n            </Grid>\n            <Grid item>\n              <Field name=\"last_name\" type=\"text\" parse={value => value || ''} initialValue={''}>\n                {({input, meta}) => {\n                  return <SimpleField\n                    input={input}\n                    meta={meta}\n                    label={\"Last Name\"}\n                    placeholder={\"Last Name\"}\n                  />\n                }}\n              </Field>\n            </Grid>\n            <Grid item style={{marginTop:'auto', marginBottom: 'auto'}}>\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\">\n                Submit\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Card>\n    )\n  }\n}\n\nSearchForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n}\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {Button} from \"@material-ui/core\";\n\n\nexport default class PaginateButtons extends React.Component {\n\n  render() {\n    const {page, isAll, handlePage} = this.props;\n    return <>\n      {(page > 1) && <Button\n        variant=\"contained\"\n        color=\"primary\"\n        type=\"submit\"\n        size=\"large\"\n        style={{marginRight: '10px'}}\n        onClick={() => handlePage(page - 1)}>\n        Previous\n      </Button>}\n      {!isAll && <Button\n        variant=\"contained\"\n        color=\"primary\"\n        type=\"submit\"\n        size=\"large\"\n        style={{marginRight: '10px'}}\n        onClick={() => handlePage(page + 1)}>\n        Next\n      </Button>}\n    </>\n  }\n}\n\nPaginateButtons.propTypes = {\n  page: PropTypes.number.isRequired,\n  isAll: PropTypes.bool.isRequired,\n  handlePage: PropTypes.func.isRequired\n}\n\n\n\n\n\n\n\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\nimport {Form} from \"react-final-form\";\nimport {Container, Grid, Typography} from \"@material-ui/core\";\n\n\nimport {getUsers, clearUsers} from \"../../../app/actionCreators\";\nimport SearchForm from \"./Form\";\nimport UserCard from \"../../common/components/UserCard\";\nimport PaginateButtons from \"../../common/components/PaginateButtons\";\n\nconst PAGE_LIMIT = 100;\n\n\nclass UsersPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      isAll: false,\n      lastQuery: {\n        first_name: '',\n        last_name: ''\n      }\n    }\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handlePage = this.handlePage.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.getUsers('', '', 1, PAGE_LIMIT);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const {users} = this.props;\n    if (prevProps.users.length === users.length) {\n      return\n    }\n    const isAll = users.length < PAGE_LIMIT;\n    this.setState({...this.state, isAll});\n  }\n\n  componentWillUnmount() {\n    this.props.clearUsers();\n  }\n\n  handleSubmit(values) {\n    this.props.getUsers(values.first_name, values.last_name, 1, PAGE_LIMIT);\n    this.setState({...this.state, lastQuery: values});\n  }\n\n  handlePage(pageNum) {\n    const {lastQuery} = this.state;\n    this.props.getUsers(lastQuery.first_name, lastQuery.last_name, pageNum, PAGE_LIMIT);\n    this.setState({...this.state, page: pageNum});\n  }\n\n\n  render() {\n    const {users} = this.props;\n    const {page, isAll} = this.state;\n\n\n    return (\n      <Container>\n        <Form\n          component={SearchForm}\n          onSubmit={this.handleSubmit}\n        />\n        <Grid item container spacing={2} justify=\"space-between\" direction=\"row\">\n          {users.map(user => <Grid item xs={6} key={'user_' + user.id}>\n              <UserCard user={user}/>\n            </Grid>\n          )}\n          {!users.length && <Typography variant=\"h5\" component=\"h2\" style={{marginBottom: \"10px\"}}>\n            Users not found\n          </Typography>}\n        </Grid>\n        <PaginateButtons page={page} isAll={isAll} handlePage={this.handlePage}/>\n      </Container>\n    );\n  }\n}\n\nUsersPage.propTypes = {\n  getUsers: PropTypes.func.isRequired,\n  clearUsers: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  users: state.users,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({getUsers, clearUsers}, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersPage);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport {Link} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\n\nconst myMessage = {\n  backgroundColor: '#F8F8FF'\n}\n\nclass Message extends React.Component {\n\n\n  render() {\n    const {user, message, currentUser} = this.props;\n    const isMyMessage = currentUser.id === user.id;\n    const align = isMyMessage ? \"right\" : \"left\";\n    return (\n      <ListItem style={isMyMessage ? myMessage : {}}>\n        <Grid container>\n          <Grid item xs={12}>\n            <ListItemText align={align}>\n              <Link to={`/${user.id}`}>{user.first_name}</Link>\n            </ListItemText>\n          </Grid>\n          <Grid item xs={12}>\n            <ListItemText align={align} primary={message.text}/>\n          </Grid>\n          <Grid item xs={12}>\n            <ListItemText align={align} secondary={(new Date(message.created * 1000)).toDateString()}/>\n          </Grid>\n        </Grid>\n      </ListItem>\n    );\n  }\n}\n\nMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.userData.user,\n});\n\n\nexport default connect(mapStateToProps, null)(Message);\n\n\n\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {Button, Grid} from \"@material-ui/core\";\n\nimport {SimpleField} from \"../../common\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst style = {\n  minWidth: '100%',\n  marginTop: 10,\n  marginBottom: 10,\n}\n\n\nexport default class MessageForm extends React.Component {\n\n  render() {\n    const {handleSubmit, form, submitting, pristine} = this.props;\n\n    return (\n      <form onSubmit={async event => {await handleSubmit(event);form.reset()}} style={style}>\n        <Grid container component={Paper}>\n          <Grid item xs={10}>\n            <Field name=\"text\">\n              {({input, meta}) => {\n                return <SimpleField input={input} meta={meta} style={{minWidth: '90%'}} label=\"Message\"/>\n              }}\n            </Field>\n          </Grid>\n          <Grid item xs={2} style={{marginTop: 'auto', marginBottom: 'auto'}}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              type=\"submit\"\n              size=\"large\"\n              disabled={submitting || pristine}>\n              Send\n            </Button>\n          </Grid>\n        </Grid>\n      </form>\n    )\n  }\n}\n\nMessageForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n}\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {animateScroll} from \"react-scroll\";\n\nimport {\n  getChatUser,\n  clearChatUser,\n  getMessages,\n  clearMessages,\n  sendMessage\n} from \"../../../app/actionCreators\";\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\n\nimport {Form} from \"react-final-form\";\n\nimport Message from \"./Message\";\nimport MessageForm from \"./Form\";\nimport {Button} from \"@material-ui/core\";\n\nconst PAGE_LIMIT = 100;\n\n\nconst chatStyle = {\n  width: '100%',\n  height: '70vh',\n  marginTop: 10,\n  minWidth: 650,\n  overflowY: 'auto'\n}\n\n\nclass ChatPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      isAll: false,\n    }\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.scrollToBottom = this.scrollToBottom.bind(this);\n    this.handleOlder = this.handleOlder.bind(this);\n  }\n\n\n  componentDidMount() {\n    const {getMessages, getChatUser, chatUserId} = this.props;\n    getChatUser(chatUserId);\n    getMessages(chatUserId, 0, 1, PAGE_LIMIT);\n\n    this.interval = setInterval(() => {\n      const messages = this.props.chat.messages;\n      const lastMessage = messages[messages.length - 1];\n      if (lastMessage) {\n        getMessages(chatUserId, lastMessage.created, 1, PAGE_LIMIT);\n      }\n    }, 2 * 1000);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const prevMessages = prevProps.chat.messages;\n    const messages = this.props.chat.messages;\n\n    const lastPrevMessage = prevMessages[prevMessages.length - 1];\n    const lastMessage = messages[messages.length - 1];\n\n    if (lastPrevMessage !== lastMessage) {\n      this.scrollToBottom();\n    }\n  }\n\n  componentWillUnmount() {\n    const {clearChatUser, clearMessages} = this.props;\n    clearChatUser();\n    clearMessages();\n    clearInterval(this.interval);\n  }\n\n  scrollToBottom() {\n    animateScroll.scrollToBottom({containerId: \"scroll-end\", duration: 0});\n  }\n\n  handleSubmit(form) {\n    const {sendMessage, chatUserId} = this.props;\n    sendMessage(chatUserId, form.text);\n  }\n\n  async handleOlder(page) {\n    const {getMessages, chatUserId} = this.props;\n    const isNotEmpty = await getMessages(chatUserId, 0, page, PAGE_LIMIT);\n    this.setState({...this.state, page: page, isAll: !isNotEmpty});\n  }\n\n  render() {\n\n    const {chat, currentUser} = this.props;\n    const {page, isAll} = this.state;\n    const users = [chat.user, currentUser];\n    const isReady = chat.user.id && currentUser.id;\n    return (\n      <>\n        <Grid container component={Paper} style={chatStyle} id=\"scroll-end\">\n          <Grid item xs={12}>\n            <List>\n              {!isAll && <Button\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"submit\"\n                size=\"small\"\n                style={{marginLeft: '10px'}}\n                onClick={() => this.handleOlder(page + 1)}>\n                Older messages\n              </Button>}\n              {isReady && chat.messages.map(m =>\n                <Message user={users.find(u => u.id === m.author_id)} message={m} key={m.id}/>)}\n            </List>\n            <Divider/>\n          </Grid>\n        </Grid>\n        <Form onSubmit={this.handleSubmit} component={MessageForm}/>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  chat: state.chat,\n  currentUser: state.userData.user\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getChatUser, clearChatUser, getMessages, clearMessages, sendMessage\n  }, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatPage);\n","import {showMessage} from './actionCreators';\nimport {store} from \"./store\";\nimport {ADD_NEW} from './actions';\n\n\nconst dispatch = action => {\n  store.dispatch(action);\n};\n\nexport const createFeedWebsocket = async () => {\n  let ws;\n  return new Promise((resolve, reject) => {\n    try {\n      ws = new WebSocket(`ws://${window.location.host}/api/v1/news/ws`);\n    } catch (e) {\n      reject(e);\n    }\n    ws.onmessage = (e) => {\n      dispatch({type: ADD_NEW, payload: JSON.parse(e.data)});\n    };\n    ws.onclose = () => {\n    };\n    ws.onerror = () => {\n      dispatch(showMessage(\"Unexpected websocket error\"))\n    };\n    ws.onopen = () => {\n      resolve(ws);\n      const state = store.getState();\n      const authentication = state.userData.authentication;\n      ws.send(JSON.stringify(authentication));\n    };\n  })\n}\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {Container, Grid, Typography} from \"@material-ui/core\";\n\nimport {getFeed, clearNews} from \"../../../app/actionCreators\";\nimport {createFeedWebsocket} from \"../../../app/ws\";\nimport New from \"../../common/components/New\";\nimport PaginateButtons from \"../../common/components/PaginateButtons\";\n\n\nconst PAGE_LIMIT = 100;\n\n\nclass FeedPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {page: 1, isAll: false};\n    this.ws = null;\n    this.handlePage = this.handlePage.bind(this);\n  }\n\n\n  componentDidMount() {\n    this.props.getFeed(1, PAGE_LIMIT);\n    createFeedWebsocket().then(ws => {this.ws = ws});\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const {news} = this.props;\n    if (prevProps.news.length === news.length) {\n      return\n    }\n    const isAll = news.length < PAGE_LIMIT;\n    this.setState({...this.state, isAll});\n  }\n\n  componentWillUnmount() {\n    this.props.clearNews();\n    if (this.ws){\n      this.ws.close();\n    }\n  }\n\n\n  async handlePage(page) {\n    this.props.getFeed(page, PAGE_LIMIT);\n    this.setState({...this.state, page: page});\n  }\n\n  render() {\n    const {news} = this.props;\n    const {page, isAll} = this.state;\n\n    return <Container>\n      <Grid item container spacing={2} justify=\"space-between\" direction=\"row\">\n        {news.map(newItem => <Grid item xs={12} key={'new_' + newItem.id}>\n            <New newItem={newItem}/>\n          </Grid>\n        )}\n        {!news.length && <Typography variant=\"h5\" component=\"h2\" style={{marginBottom: \"10px\"}}>\n          News not found\n        </Typography>}\n      </Grid>\n      <PaginateButtons page={page} isAll={isAll} handlePage={this.handlePage}/>\n    </Container>\n  }\n}\n\nconst mapStateToProps = state => ({news: state.news});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({getFeed, clearNews}, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedPage);\n","import React from 'react';\r\nimport {BrowserRouter as Router, Switch, Route,} from \"react-router-dom\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {getUserData} from \"./app/actionCreators\";\r\nimport {connect} from \"react-redux\";\r\nimport {Container, Grid} from \"@material-ui/core\";\r\n\r\nimport {AuthorizedOnly, AnonymousOnly} from \"./components/common\";\r\nimport {LoginPage, RegisterPage, UserPage, UsersPage, ChatPage, FeedPage} from \"./components/pages\";\r\nimport Header from \"./components/common/components/Header\";\r\nimport {Notification} from \"./components/common\";\r\n\r\nimport './style.css'\r\n\r\nclass App extends React.Component {\r\n\r\n\r\n  componentDidMount() {\r\n    const {userData, getUserData} = this.props;\r\n    const {isAuthenticated, authentication, user} = userData;\r\n    if (isAuthenticated && user.id === 0) {\r\n      getUserData(authentication.user_id);\r\n    }\r\n    this.interval = setInterval(() => {\r\n      const {isAuthenticated, authentication} = this.props.userData;\r\n      if (isAuthenticated) {\r\n        getUserData(authentication.user_id);\r\n      }\r\n    }, 20 * 1000);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    const {userData, getUserData} = this.props;\r\n    const stateChanged = prevProps.userData.isAuthenticated !== userData.isAuthenticated;\r\n    if (stateChanged && userData.isAuthenticated) {\r\n      getUserData(userData.authentication.user_id);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <Router>\r\n        <Header/>\r\n        <Notification/>\r\n        <Container>\r\n          <Grid>\r\n            <Grid container justify='center'>\r\n              <Switch>\r\n                <Route path=\"/login\">\r\n                  <AnonymousOnly>\r\n                    <LoginPage/>\r\n                  </AnonymousOnly>\r\n                </Route>\r\n                <Route path=\"/register\">\r\n                  <AnonymousOnly>\r\n                    <RegisterPage/>\r\n                  </AnonymousOnly>\r\n                </Route>\r\n                <Route path=\"/feed\">\r\n                  <AuthorizedOnly>\r\n                    <FeedPage/>\r\n                  </AuthorizedOnly>\r\n                </Route>\r\n                <Route path=\"/chat/:id\" render={({match}) =>\r\n                  <AuthorizedOnly>\r\n                    <ChatPage\r\n                      key={match.params.id}\r\n                      chatUserId={match.params.id}\r\n                    />\r\n                  </AuthorizedOnly>\r\n                }>\r\n                </Route>\r\n                <Route path=\"/:id\" render={({match}) =>\r\n                  <UserPage\r\n                    key={match.params.id}\r\n                    id={match.params.id}/>\r\n                }>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                  <UsersPage/>\r\n                </Route>\r\n              </Switch>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  userData: state.userData,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators({\r\n    getUserData\r\n  }, dispatch)\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\n\r\nimport App from './App';\r\nimport {store} from './app/store';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App/>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}